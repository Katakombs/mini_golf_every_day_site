<!DOCTYPE html>
<html>
<head>
    <title>Debug Index</title>
</head>
<body>
    <h1>Debug Test</h1>
    <div>Video Count: <span id="video-count">Loading...</span></div>
    <div>Days Count: <span id="days-count">Loading...</span></div>
    <div id="debug-info"></div>
    
    <script>
        async function debugTest() {
            const debugEl = document.getElementById('debug-info');
            
            try {
                console.log('Base URL:', window.location.origin);
                debugEl.innerHTML += '<p>Base URL: ' + window.location.origin + '</p>';
                
                console.log('Testing /api/status...');
                const statusResponse = await fetch('/api/status');
                console.log('Status response status:', statusResponse.status);
                debugEl.innerHTML += '<p>Status API status: ' + statusResponse.status + '</p>';
                
                if (!statusResponse.ok) {
                    throw new Error('Status API failed with status: ' + statusResponse.status);
                }
                
                const statusData = await statusResponse.json();
                console.log('Status data:', statusData);
                debugEl.innerHTML += '<p>Status data: ' + JSON.stringify(statusData) + '</p>';
                
                // Update elements
                document.getElementById('video-count').textContent = statusData.video_count || 'No video_count';
                document.getElementById('days-count').textContent = statusData.days_running || 'No days_running';
                
            } catch (error) {
                console.error('Debug test error:', error);
                debugEl.innerHTML += '<p style="color: red;">Error: ' + error.message + '</p>';
                
                // Set fallback
                document.getElementById('video-count').textContent = '30+';
                document.getElementById('days-count').textContent = '30+';
            }
        }
        
        document.addEventListener('DOMContentLoaded', debugTest);
    </script>
</body>
</html>
